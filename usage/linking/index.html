<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Linking applications &mdash; Tutum Documentation</title>
    
    <link rel="stylesheet" href="../../_static/css/global-style.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../../',
        VERSION:     '0.6',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../../_static/jquery.js"></script>
    <script type="text/javascript" src="../../_static/underscore.js"></script>
    <script type="text/javascript" src="../../_static/doctools.js"></script>
    <link rel="top" title="Tutum Documentation" href="../../" />
    <link rel="up" title="Usage" href="../" />
    <link rel="next" title="Pushing your app to Tutum" href="../pushing/" />
    <link rel="prev" title="Scaling an application" href="../scaling/" />
<link rel="icon" href="../../_static/images/favicon.png" type="image/png"><link rel="stylesheet" href="../../_static/assets/fraction/fractionslider.css" type="text/css" />

    <!-- start Mixpanel --><script type="text/javascript">(function(e,b){if(!b.__SV){var a,f,i,g;window.mixpanel=b;b._i=[];b.init=function(a,e,d){function f(b,h){var a=h.split(".");2==a.length&&(b=b[a[0]],h=a[1]);b[h]=function(){b.push([h].concat(Array.prototype.slice.call(arguments,0)))}}var c=b;"undefined"!==typeof d?c=b[d]=[]:d="mixpanel";c.people=c.people||[];c.toString=function(b){var a="mixpanel";"mixpanel"!==d&&(a+="."+d);b||(a+=" (stub)");return a};c.people.toString=function(){return c.toString(1)+".people (stub)"};i="disable track track_pageview track_links track_forms register register_once alias unregister identify name_tag set_config people.set people.set_once people.increment people.append people.track_charge people.clear_charges people.delete_user".split(" ");
for(g=0;g<i.length;g++)f(c,i[g]);b._i.push([a,e,d])};b.__SV=1.2;a=e.createElement("script");a.type="text/javascript";a.async=!0;a.src=("https:"===e.location.protocol?"https:":"http:")+'//cdn.mxpnl.com/libs/mixpanel-2.2.min.js';f=e.getElementsByTagName("script")[0];f.parentNode.insertBefore(a,f)}})(document,window.mixpanel||[]);
mixpanel.init("159ca175991708692270a92c8a5f39f9");mixpanel.track("Documentation Page View", {"URL": window.location.pathname});</script><!-- end Mixpanel -->

    <script type="text/javascript" src="//use.typekit.net/nyy5cxc.js"></script>
    <script type="text/javascript">try{Typekit.load();}catch(e){}</script>

  </head>
  <body>

    <div class="document">
<header>
    <div class="navbar navbar-white" role="navigation">
        <div class="container">
            <div class="navbar-header">
                <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
                    <span class="sr-only">Toggle navigation</span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                </button>
                <a class="navbar-brand" href="http://www.tutum.co/">
                    <img src="../../_static/images/tutum-logo-white.svg" alt="Tutum Logo">
                </a>
            </div>
            <div class="navbar-collapse collapse">
                <ul class="nav navbar-nav navbar-right">
                    <li>
                        <a href="http://www.tutum.co/">Home</a>
                    </li>
                    <li>
                        <a href="http://www.tutum.co/pricing/">Pricing</a>
                    </li>
                    <li class="hidden-sm">
                        <a href="http://docs.tutum.co/">Documentation</a>
                    </li>
                    <li class="hidden-sm">
                        <a href="http://support.tutum.co/hc/communities/public/topics">Community</a>
                    </li>
                    <li>
                        <a href="http://blog.tutum.co/">Blog</a>
                    </li>
                    <li>
                        <a href="https://app.tutum.co/accounts/register/"><strong>Sign up</strong></a>
                    </li>
                    <li>
                        <a href="https://app.tutum.co/accounts/login/">Log in</a>
                    </li>

                </ul>
            </div><!--/.nav-collapse -->
        </div>
    </div>
</header>

<section class="slice slicewhite">
    <div class="w-section inverse">
        <div class="container">
            <div class="row">
                <div class="col-sm-3" style="padding-top:25px;">
                    <div id="toctree" style="display:none;">
                        
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper"><div id="searchbox" style="display: none; margin-bottom:50px;">
    <form class="search" action="../../search/" method="get">
      <input type="search" class="form-control" name="q" placeholder="Search documentation..." />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
                        <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../">Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../billing/">Billing FAQ</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../technical/">Technical FAQ</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../">Usage</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../launching/">Launching an application</a></li>
<li class="toctree-l2"><a class="reference internal" href="../scaling/">Scaling an application</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="">Linking applications</a></li>
<li class="toctree-l2"><a class="reference internal" href="../pushing/">Pushing your app to Tutum</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../reference/">Reference</a></li>
</ul>

                    </div>
                </div>
                <div class="col-sm-9">
                    
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <div class="section" id="linking-applications">
<h1>Linking applications<a class="headerlink" href="#linking-applications" title="Permalink to this headline">¶</a></h1>
<p>Tutum&#8217;s application linking capabilities have been modeled after Docker&#8217;s own
<a class="reference external" href="http://docs.docker.io/en/latest/use/working_with_links_names/">Container Links</a>.</p>
<p>Linking applications exposes a pre-defined set of environment variables with information (i.e. hostname, port, etc.)
from the <em>linked</em> application to the <em>linking</em> application.</p>
<p>Tutum links your application to all of the linked application&#8217;s containers. To do this, Tutum prefixes the environment
variables with the applications and container&#8217;s names.</p>
<p>For example, let&#8217;s say that you are running an application (<tt class="docutils literal"><span class="pre">my-web-app</span></tt>) with 2 containers (<tt class="docutils literal"><span class="pre">my-web-app-1</span></tt> and <tt class="docutils literal"><span class="pre">my-web-app-2</span></tt>).
You now want to launch a proxy that will balance HTTP traffic to each of the containers in your <tt class="docutils literal"><span class="pre">my-web-app</span></tt> application.
To launch the proxy, you would first select the appropriate image, then link it to your &#8220;web&#8221; application.
These are the environment variables that would be passed to your proxy:</p>
<table border="1" class="table table-bordered table-striped docutils">
<colgroup>
<col width="28%" />
<col width="72%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Name</th>
<th class="head">Value</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>MY_WEB_APP_1_PORT</td>
<td><a class="reference external" href="tcp://my-web-app-1-user.beta.tutum.io:49330">tcp://my-web-app-1-user.beta.tutum.io:49330</a></td>
</tr>
<tr class="row-odd"><td>MY_WEB_APP_1_PORT_80_TCP</td>
<td><a class="reference external" href="tcp://my-web-app-1-user.beta.tutum.io:49330">tcp://my-web-app-1-user.beta.tutum.io:49330</a></td>
</tr>
<tr class="row-even"><td>MY_WEB_APP_1_PORT_80_TCP_ADDR</td>
<td>my-web-app-1-user.beta.tutum.io</td>
</tr>
<tr class="row-odd"><td>MY_WEB_APP_1_PORT_80_TCP_PORT</td>
<td>49330</td>
</tr>
<tr class="row-even"><td>MY_WEB_APP_1_PORT_80_TCP_PROTO</td>
<td>tcp</td>
</tr>
<tr class="row-odd"><td>MY_WEB_APP_2_PORT</td>
<td><a class="reference external" href="tcp://my-web-app-2-user.delta.tutum.io:49331">tcp://my-web-app-2-user.delta.tutum.io:49331</a></td>
</tr>
<tr class="row-even"><td>MY_WEB_APP_2_PORT_80_TCP</td>
<td><a class="reference external" href="tcp://my-web-app-2-user.delta.tutum.io:49331">tcp://my-web-app-2-user.delta.tutum.io:49331</a></td>
</tr>
<tr class="row-odd"><td>MY_WEB_APP_2_PORT_80_TCP_ADDR</td>
<td>my-web-app-2-user.delta.tutum.io</td>
</tr>
<tr class="row-even"><td>MY_WEB_APP_2_PORT_80_TCP_PORT</td>
<td>49331</td>
</tr>
<tr class="row-odd"><td>MY_WEB_APP_2_PORT_80_TCP_PROTO</td>
<td>tcp</td>
</tr>
<tr class="row-even"><td>MY_WEB_APP_TUTUM_API_URL</td>
<td><a class="reference external" href="https://app.tutum.co/api/v1/application/6fe5029e-c125-4088-9b9a-4e74da20ac58/">https://app.tutum.co/api/v1/application/6fe5029e-c125-4088-9b9a-4e74da20ac58/</a></td>
</tr>
</tbody>
</table>
<p>Your proxy application can now use these environment variables to configure itself on startup and start balancing traffic
between the two containers of <tt class="docutils literal"><span class="pre">my-web-app</span></tt>.</p>
<p>You will notice that the last environment variable, <tt class="docutils literal"><span class="pre">MY_WEB_APP_TUTUM_API_URL</span></tt>, is not defined in the Docker specification.
This is a special Tutum variable passed on every link that contains the Tutum API resource URI of the linked application.
This can be used, in conjunction with API roles (see below), to check for updates in the linked application.</p>
<div class="section" id="using-tutum-api-roles">
<h2>Using Tutum API roles<a class="headerlink" href="#using-tutum-api-roles" title="Permalink to this headline">¶</a></h2>
<p>The above example is a very simple one. If <tt class="docutils literal"><span class="pre">my-web-app</span></tt> scales down, the proxy could detect this and remove the terminated container
from its member list. However, if <tt class="docutils literal"><span class="pre">my-web-app</span></tt> scales up, these environment variables alone will not be of any help to
detect the change.</p>
<p>You can give an application an API role. This role is a set of privileges granted to the application containers on the
Tutum API. At the moment we only support a &#8220;full&#8221; role which allows any operation to be performed on the API if granted.
To get the list of available roles you can query the API: see <a class="reference internal" href="../../reference/api/#api-roles"><em>Roles</em></a></p>
<p>The API role is passed in to the application containers as an authorization token stored in an environment variable called <tt class="docutils literal"><span class="pre">TUTUM_AUTH</span></tt>.
This variable should be use to set the <tt class="docutils literal"><span class="pre">Authorization</span></tt> HTTP header when calling Tutum&#8217;s API:</p>
<div class="highlight-bash"><div class="highlight"><pre>curl -H <span class="s2">&quot;Authorization: $TUTUM_AUTH&quot;</span> https://app.tutum.co/api/v1/application/
</pre></div>
</div>
<p>Using this feature and following the example above, we can ask for updated information of the application using the
environment variable <tt class="docutils literal"><span class="pre">MY_WEB_APP_TUTUM_API_URL</span></tt>:</p>
<div class="highlight-bash"><div class="highlight"><pre>curl -H <span class="s2">&quot;Authorization: $TUTUM_AUTH&quot;</span> <span class="nv">$MY_WEB_APP_TUTUM_API_URL</span>

<span class="o">{</span>
    <span class="s2">&quot;autodestroy&quot;</span>: <span class="s2">&quot;OFF&quot;</span>,
    <span class="s2">&quot;autoreplace&quot;</span>: <span class="s2">&quot;OFF&quot;</span>,
    <span class="s2">&quot;autorestart&quot;</span>: <span class="s2">&quot;OFF&quot;</span>,
    <span class="s2">&quot;container_envvars&quot;</span>: <span class="o">[]</span>,
    <span class="s2">&quot;container_ports&quot;</span>: <span class="o">[</span>
        <span class="o">{</span>
            <span class="s2">&quot;application&quot;</span>: <span class="s2">&quot;/api/v1/application/6fe5029e-c125-4088-9b9a-4e74da20ac58/&quot;</span>,
            <span class="s2">&quot;inner_port&quot;</span>: 80,
            <span class="s2">&quot;outer_port&quot;</span>: null,
            <span class="s2">&quot;protocol&quot;</span>: <span class="s2">&quot;tcp&quot;</span>
        <span class="o">}</span>
    <span class="o">]</span>,
    <span class="s2">&quot;container_size&quot;</span>: <span class="s2">&quot;XS&quot;</span>,
    <span class="s2">&quot;containers&quot;</span>: <span class="o">[</span>
        <span class="s2">&quot;/api/v1/container/7d6696b7-fbaf-471d-8e6b-ce7052586c24/&quot;</span>,
        <span class="s2">&quot;/api/v1/container/83499f74-85b1-4f69-9ab3-658a67535f70/&quot;</span>
    <span class="o">]</span>,
    <span class="s2">&quot;current_num_containers&quot;</span>: 2,
    <span class="s2">&quot;deployed_datetime&quot;</span>: <span class="s2">&quot;Mon, 24 Mar 2014 23:58:15 +0000&quot;</span>,
    <span class="s2">&quot;destroyed_datetime&quot;</span>: null,
    <span class="s2">&quot;entrypoint&quot;</span>: <span class="s2">&quot;&quot;</span>,
    <span class="s2">&quot;image_tag&quot;</span>: <span class="s2">&quot;/api/v1/image/tutum/hello-world/tag/latest/&quot;</span>,
    <span class="s2">&quot;link_variables&quot;</span>: <span class="o">{</span>
        <span class="s2">&quot;MY_WEB_APP_1_PORT&quot;</span>: <span class="s2">&quot;tcp://my-web-app-1-admin.beta.tutum.io:49330&quot;</span>,
        <span class="s2">&quot;MY_WEB_APP_1_PORT_80_TCP&quot;</span>: <span class="s2">&quot;tcp://my-web-app-1-admin.beta.tutum.io:49330&quot;</span>,
        <span class="s2">&quot;MY_WEB_APP_1_PORT_80_TCP_ADDR&quot;</span>: <span class="s2">&quot;my-web-app-1-admin.beta.tutum.io&quot;</span>,
        <span class="s2">&quot;MY_WEB_APP_1_PORT_80_TCP_PORT&quot;</span>: <span class="s2">&quot;49330&quot;</span>,
        <span class="s2">&quot;MY_WEB_APP_1_PORT_80_TCP_PROTO&quot;</span>: <span class="s2">&quot;tcp&quot;</span>,
        <span class="s2">&quot;MY_WEB_APP_2_PORT&quot;</span>: <span class="s2">&quot;tcp://my-web-app-2-admin.beta.tutum.io:49331&quot;</span>,
        <span class="s2">&quot;MY_WEB_APP_2_PORT_80_TCP&quot;</span>: <span class="s2">&quot;tcp://my-web-app-2-admin.beta.tutum.io:49331&quot;</span>,
        <span class="s2">&quot;MY_WEB_APP_2_PORT_80_TCP_ADDR&quot;</span>: <span class="s2">&quot;my-web-app-2-admin.beta.tutum.io&quot;</span>,
        <span class="s2">&quot;MY_WEB_APP_2_PORT_80_TCP_PORT&quot;</span>: <span class="s2">&quot;49331&quot;</span>,
        <span class="s2">&quot;MY_WEB_APP_2_PORT_80_TCP_PROTO&quot;</span>: <span class="s2">&quot;tcp&quot;</span>,
        <span class="s2">&quot;MY_WEB_APP_TUTUM_API_URL&quot;</span>: <span class="s2">&quot;https://app.tutum.co/api/v1/application/6fe5029e-c125-4088-9b9a-4e74da20ac58/&quot;</span>
    <span class="o">}</span>,
    <span class="s2">&quot;linked_from_application&quot;</span>: <span class="o">[]</span>,
    <span class="s2">&quot;linked_to_application&quot;</span>: <span class="o">[]</span>,
    <span class="s2">&quot;name&quot;</span>: <span class="s2">&quot;my-web-app&quot;</span>,
    <span class="s2">&quot;resource_uri&quot;</span>: <span class="s2">&quot;/api/v1/application/6fe5029e-c125-4088-9b9a-4e74da20ac58/&quot;</span>,
    <span class="s2">&quot;roles&quot;</span>: <span class="o">[]</span>,
    <span class="s2">&quot;run_command&quot;</span>: <span class="s2">&quot;/run.sh&quot;</span>,
    <span class="s2">&quot;running_num_containers&quot;</span>: 1,
    <span class="s2">&quot;started_datetime&quot;</span>: <span class="s2">&quot;Mon, 24 Mar 2014 23:58:15 +0000&quot;</span>,
    <span class="s2">&quot;state&quot;</span>: <span class="s2">&quot;Partly running&quot;</span>,
    <span class="s2">&quot;stopped_datetime&quot;</span>: null,
    <span class="s2">&quot;stopped_num_containers&quot;</span>: 1,
    <span class="s2">&quot;target_num_containers&quot;</span>: 2,
    <span class="s2">&quot;unique_name&quot;</span>: <span class="s2">&quot;my-web-app&quot;</span>,
    <span class="s2">&quot;uuid&quot;</span>: <span class="s2">&quot;6fe5029e-c125-4088-9b9a-4e74da20ac58&quot;</span>
<span class="o">}</span>
</pre></div>
</div>
<p>Using this information (reading the <tt class="docutils literal"><span class="pre">containers</span></tt> attribute of the JSON response), the proxy can detect any changes
on the linked application and add and remove members as the application scales up or down.</p>
</div>
</div>


          </div>
        </div>
      </div>
                    <div class="pull-right edit-on-github"><a href="https://github.com/tutumcloud/tutumcloud.github.io/blob/source/docs/source/usage/linking/index.rst" target="_blank" title="Edit on GitHub"><i class="fa fa-github"></i></a></div>
                </div>
            </div>
        </div>
    </div>
</section>

      <div class="clearer"></div>
    </div>
<footer>
    <div class="container">
        <div class="row">
            <div class="col-md-2">
                <div class="col">
                    <h4>Contact us</h4>
                    <ul>
                        <li>New York, NY</li>
                        <li>Phone: <a href="tel:+14157422442">+1 415 742 2442</a></li>
                        <li>Email: <a href="mailto:info@tutum.co" title="Email us">info@tutum.co</a></li>
                        <li>Twitter: <a href="http://twitter.com/tutumcloud" title="Tweet" target="_blank">@tutumcloud</a></li>
                        <li></li>
                    </ul>
                </div>
            </div>

            <div class="col-md-3">
                <div class="col col-social-icons">
                    <h4>Follow us</h4>
                    <a href="http://twitter.com/tutumcloud" target="_blank"><i class="fa fa-twitter"></i></a>
                    <a href="https://plus.google.com/109847567335136113736" rel="publisher" target="_blank"><i class="fa fa-google-plus"></i></a>
                    <a href="http://www.linkedin.com/company/tutum" target="_blank"><i class="fa fa-linkedin"></i></a>
                    <i class="fa">
                        <a href="https://angel.co/tutum" target="_blank"><img src="../../_static/images/angellist.png" alt="Docker" style=" width: 20px; "></a>
                    </i>
                    <a href="https://www.youtube.com/channel/UCljbgzDNU1Z_U5TsGtzsL0g" target="_blank"><i class="fa fa-youtube"></i></a>
                    <a href="https://vimeo.com/user17080388" target="_blank"><i class="fa fa-vimeo-square"></i></a>
                    <a href="https://github.com/tutumcloud/" target="_blank"><i class="fa fa-github-square"></i></a>
                </div>
            </div>

            <div class="col-md-3 pull-right">
                <div class="col">
                    <h4>Proudly powered by</h4>
                    <a href="http://aws.amazon.com/what-is-cloud-computing" target="_blank"><img src="../../_static/images/aws.png" alt="Powered by AWS Cloud Computing" style=" width: 150px; "></a>
                </div>
            </div>
        </div>

        <hr />

        <div class="row">
            <div class="col-lg-9 copyright">
                2014 &copy; Tutum, Inc. All rights reserved.
                <a href="http://www.tutum.co/tos">Terms of Service</a> |
                <a href="http://www.tutum.co/privacy">Privacy Policy</a> |
                <a href="http://www.tutum.co/aup">Acceptable Use Policy</a>
            </div>
            <div class="col-lg-3 footer-logo">

            </div>
        </div>
    </div>
</footer>
<script type="text/javascript" src="../../_static/assets/bootstrap/js/bootstrap.min.js"></script>
<script type="text/javascript" src="../../_static/js/modernizr.custom.js"></script>
<!--[if lt IE 9]>
    <script src="../../_static/js/html5shiv.js"></script>
    <script src="../../_static/js/respond.min.js"></script>
<![endif]-->
<script type="text/javascript" src="../../_static/assets/hover-dropdown/bootstrap-hover-dropdown.min.js"></script>
<script type="text/javascript" src="../../_static/js/custom.js"></script>
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-38422650-6', 'tutum.co');
  ga('send', 'pageview');
</script>

  </body>
</html>